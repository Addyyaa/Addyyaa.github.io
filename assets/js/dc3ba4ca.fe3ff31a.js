"use strict";(self.webpackChunkaddy_notes=self.webpackChunkaddy_notes||[]).push([[5404],{5284:(n,e,l)=>{l.r(e),l.d(e,{assets:()=>t,contentTitle:()=>d,default:()=>h,frontMatter:()=>c,metadata:()=>s,toc:()=>a});const s=JSON.parse('{"id":"Python\u7b14\u8bb0/Python\u9ad8\u7ea7\u7279\u6027-\u88c5\u9970\u5668_\u751f\u6210\u5668_\u4e0a\u4e0b\u6587_\u5143\u7c7b_\u95ed\u5305_\u63cf\u8ff0\u7b26","title":"\u6df1\u5165\u7406\u89e3 Python \u9ad8\u7ea7\u7279\u6027","description":"\u672c\u6587\u7cfb\u7edf\u6df1\u5165\u8bb2\u89e3\u4ee5\u4e0b\u6838\u5fc3\u4e3b\u9898\uff1a\u88c5\u9970\u5668\u3001\u751f\u6210\u5668\u4e0e\u8fed\u4ee3\u534f\u8bae\u3001\u4e0a\u4e0b\u6587\u7ba1\u7406\u5668\u3001\u5143\u7c7b\u3001\u95ed\u5305\u4e0e\u533f\u540d\u51fd\u6570\u3001\u63cf\u8ff0\u7b26\u3002\u914d\u5408\u5b9e\u7528\u793a\u4f8b\u3001\u5e38\u89c1\u5751\u4e0e\u6700\u4f73\u5b9e\u8df5\uff0c\u5e2e\u52a9\u4f60\u5728\u5de5\u7a0b\u4e2d\u5199\u51fa\u53ef\u7ef4\u62a4\u3001\u53ef\u6269\u5c55\u7684\u9ad8\u8d28\u91cf\u4ee3\u7801\u3002","source":"@site/docs/Python\u7b14\u8bb0/Python\u9ad8\u7ea7\u7279\u6027-\u88c5\u9970\u5668_\u751f\u6210\u5668_\u4e0a\u4e0b\u6587_\u5143\u7c7b_\u95ed\u5305_\u63cf\u8ff0\u7b26.md","sourceDirName":"Python\u7b14\u8bb0","slug":"/python/advanced-features","permalink":"/docs/python/advanced-features","draft":false,"unlisted":false,"editUrl":"https://github.com/Addyyaa/Addyyaa.github.io/tree/main/docs/Python\u7b14\u8bb0/Python\u9ad8\u7ea7\u7279\u6027-\u88c5\u9970\u5668_\u751f\u6210\u5668_\u4e0a\u4e0b\u6587_\u5143\u7c7b_\u95ed\u5305_\u63cf\u8ff0\u7b26.md","tags":[],"version":"current","sidebarPosition":6,"frontMatter":{"sidebar_position":6,"slug":"/python/advanced-features"},"sidebar":"tutorialSidebar","previous":{"title":"Python\u5bfc\u5165\u5bfc\u51fa\u8be6\u89e3","permalink":"/docs/python/import-export"},"next":{"title":"FASTAPI","permalink":"/docs/Python\u7b14\u8bb0/python\u540e\u7aef\u6846\u67b6-fastapi"}}');var r=l(4848),i=l(8453);const c={sidebar_position:6,slug:"/python/advanced-features"},d="\u6df1\u5165\u7406\u89e3 Python \u9ad8\u7ea7\u7279\u6027",t={},a=[{value:"\u88c5\u9970\u5668\uff08Decorator\uff09",id:"\u88c5\u9970\u5668decorator",level:2},{value:"\u6982\u5ff5\uff08\u88c5\u9970\u5668\uff09",id:"\u6982\u5ff5\u88c5\u9970\u5668",level:3},{value:"\u5e94\u7528\u573a\u666f\uff08\u88c5\u9970\u5668\uff09",id:"\u5e94\u7528\u573a\u666f\u88c5\u9970\u5668",level:3},{value:"\u5165\u95e8\u793a\u4f8b\uff08\u88c5\u9970\u5668\uff09",id:"\u5165\u95e8\u793a\u4f8b\u88c5\u9970\u5668",level:3},{value:"\u57fa\u7840\u51fd\u6570\u88c5\u9970\u5668",id:"\u57fa\u7840\u51fd\u6570\u88c5\u9970\u5668",level:3},{value:"\u5e26\u53c2\u6570\u7684\u88c5\u9970\u5668",id:"\u5e26\u53c2\u6570\u7684\u88c5\u9970\u5668",level:3},{value:"\u7c7b\u88c5\u9970\u5668",id:"\u7c7b\u88c5\u9970\u5668",level:3},{value:"\u5e38\u89c1\u5751\u4e0e\u6700\u4f73\u5b9e\u8df5\uff08\u88c5\u9970\u5668\uff09",id:"\u5e38\u89c1\u5751\u4e0e\u6700\u4f73\u5b9e\u8df5\u88c5\u9970\u5668",level:3},{value:"\u7ec3\u4e60\u4e0e\u601d\u8003\uff08\u88c5\u9970\u5668\uff09",id:"\u7ec3\u4e60\u4e0e\u601d\u8003\u88c5\u9970\u5668",level:3},{value:"\u751f\u6210\u5668\u4e0e\u8fed\u4ee3\uff08Generator &amp; Iteration\uff09",id:"\u751f\u6210\u5668\u4e0e\u8fed\u4ee3generator--iteration",level:2},{value:"\u6982\u5ff5\uff08\u751f\u6210\u5668\u4e0e\u8fed\u4ee3\uff09",id:"\u6982\u5ff5\u751f\u6210\u5668\u4e0e\u8fed\u4ee3",level:3},{value:"\u5e94\u7528\u573a\u666f\uff08\u751f\u6210\u5668\u4e0e\u8fed\u4ee3\uff09",id:"\u5e94\u7528\u573a\u666f\u751f\u6210\u5668\u4e0e\u8fed\u4ee3",level:3},{value:"\u5165\u95e8\u793a\u4f8b\uff1a\u57fa\u7840\u751f\u6210\u5668",id:"\u5165\u95e8\u793a\u4f8b\u57fa\u7840\u751f\u6210\u5668",level:3},{value:"\u751f\u6210\u5668\u8868\u8fbe\u5f0f\u4e0e\u60f0\u6027\u7ba1\u9053",id:"\u751f\u6210\u5668\u8868\u8fbe\u5f0f\u4e0e\u60f0\u6027\u7ba1\u9053",level:3},{value:"<code>yield from</code> \u59d4\u6258",id:"yield-from-\u59d4\u6258",level:3},{value:"\u8fed\u4ee3\u534f\u8bae\uff1a\u81ea\u5b9a\u4e49\u8fed\u4ee3\u5668",id:"\u8fed\u4ee3\u534f\u8bae\u81ea\u5b9a\u4e49\u8fed\u4ee3\u5668",level:3},{value:"\u751f\u6210\u5668\u7684\u9ad8\u7ea7\u7528\u6cd5\uff1a<code>send</code>\u3001<code>throw</code>\u3001<code>close</code>",id:"\u751f\u6210\u5668\u7684\u9ad8\u7ea7\u7528\u6cd5sendthrowclose",level:3},{value:"\u5e38\u89c1\u5751\u4e0e\u6700\u4f73\u5b9e\u8df5\uff08\u751f\u6210\u5668\uff09",id:"\u5e38\u89c1\u5751\u4e0e\u6700\u4f73\u5b9e\u8df5\u751f\u6210\u5668",level:3},{value:"\u7ec3\u4e60\u4e0e\u601d\u8003\uff08\u751f\u6210\u5668\uff09",id:"\u7ec3\u4e60\u4e0e\u601d\u8003\u751f\u6210\u5668",level:3},{value:"\u4e0a\u4e0b\u6587\u7ba1\u7406\u5668\uff08Context Manager\uff09",id:"\u4e0a\u4e0b\u6587\u7ba1\u7406\u5668context-manager",level:2},{value:"\u6982\u5ff5\uff08\u4e0a\u4e0b\u6587\u7ba1\u7406\u5668\uff09",id:"\u6982\u5ff5\u4e0a\u4e0b\u6587\u7ba1\u7406\u5668",level:3},{value:"\u5e94\u7528\u573a\u666f\uff08\u4e0a\u4e0b\u6587\u7ba1\u7406\u5668\uff09",id:"\u5e94\u7528\u573a\u666f\u4e0a\u4e0b\u6587\u7ba1\u7406\u5668",level:3},{value:"\u5165\u95e8\u793a\u4f8b\uff1a<code>__enter__</code> / <code>__exit__</code>",id:"\u5165\u95e8\u793a\u4f8b__enter__--__exit__",level:3},{value:"<code>contextlib</code> \u5de5\u5177\u96c6",id:"contextlib-\u5de5\u5177\u96c6",level:3},{value:"\u5e38\u89c1\u5751\u4e0e\u6700\u4f73\u5b9e\u8df5\uff08\u4e0a\u4e0b\u6587\u7ba1\u7406\u5668\uff09",id:"\u5e38\u89c1\u5751\u4e0e\u6700\u4f73\u5b9e\u8df5\u4e0a\u4e0b\u6587\u7ba1\u7406\u5668",level:3},{value:"\u7ec3\u4e60\u4e0e\u601d\u8003\uff08\u4e0a\u4e0b\u6587\u7ba1\u7406\u5668\uff09",id:"\u7ec3\u4e60\u4e0e\u601d\u8003\u4e0a\u4e0b\u6587\u7ba1\u7406\u5668",level:3},{value:"\u5143\u7c7b\uff08Metaclass\uff09",id:"\u5143\u7c7bmetaclass",level:2},{value:"\u6982\u5ff5\uff08\u5143\u7c7b\uff09",id:"\u6982\u5ff5\u5143\u7c7b",level:3},{value:"\u5e94\u7528\u573a\u666f\uff08\u5143\u7c7b\uff09",id:"\u5e94\u7528\u573a\u666f\u5143\u7c7b",level:3},{value:"\u81ea\u5b9a\u4e49\u5143\u7c7b\uff1a\u5f3a\u5236\u7c7b\u5c5e\u6027\u5b58\u5728",id:"\u81ea\u5b9a\u4e49\u5143\u7c7b\u5f3a\u5236\u7c7b\u5c5e\u6027\u5b58\u5728",level:3},{value:"\u5355\u4f8b\u4f5c\u4e3a\u5143\u7c7b\u5b9e\u73b0",id:"\u5355\u4f8b\u4f5c\u4e3a\u5143\u7c7b\u5b9e\u73b0",level:3},{value:"\u4fee\u6539\u7c7b\u7684\u5c5e\u6027\u6216\u65b9\u6cd5",id:"\u4fee\u6539\u7c7b\u7684\u5c5e\u6027\u6216\u65b9\u6cd5",level:3},{value:"\u81ea\u52a8\u6ce8\u518c",id:"\u81ea\u52a8\u6ce8\u518c",level:3},{value:"\u5e38\u89c1\u5751\u4e0e\u6700\u4f73\u5b9e\u8df5\uff08\u5143\u7c7b\uff09",id:"\u5e38\u89c1\u5751\u4e0e\u6700\u4f73\u5b9e\u8df5\u5143\u7c7b",level:3},{value:"\u95ed\u5305\u4e0e\u533f\u540d\u51fd\u6570\uff08Closure &amp; Lambda\uff09",id:"\u95ed\u5305\u4e0e\u533f\u540d\u51fd\u6570closure--lambda",level:2},{value:"\u6982\u5ff5\uff08\u95ed\u5305\u4e0e\u533f\u540d\u51fd\u6570\uff09",id:"\u6982\u5ff5\u95ed\u5305\u4e0e\u533f\u540d\u51fd\u6570",level:3},{value:"\u5e94\u7528\u573a\u666f\uff08\u95ed\u5305\u4e0e\u533f\u540d\u51fd\u6570\uff09",id:"\u5e94\u7528\u573a\u666f\u95ed\u5305\u4e0e\u533f\u540d\u51fd\u6570",level:3},{value:"\u95ed\u5305\u4e0e <code>nonlocal</code>",id:"\u95ed\u5305\u4e0e-nonlocal",level:3},{value:"\u95ed\u5305\u7684\u5ef6\u8fdf\u7ed1\u5b9a\u9677\u9631\u4e0e\u4fee\u590d",id:"\u95ed\u5305\u7684\u5ef6\u8fdf\u7ed1\u5b9a\u9677\u9631\u4e0e\u4fee\u590d",level:3},{value:"\u533f\u540d\u51fd\u6570\u4e0e <code>functools.partial</code>",id:"\u533f\u540d\u51fd\u6570\u4e0e-functoolspartial",level:3},{value:"\u5e38\u89c1\u5751\u4e0e\u6700\u4f73\u5b9e\u8df5\uff08\u95ed\u5305\u4e0e\u533f\u540d\u51fd\u6570\uff09",id:"\u5e38\u89c1\u5751\u4e0e\u6700\u4f73\u5b9e\u8df5\u95ed\u5305\u4e0e\u533f\u540d\u51fd\u6570",level:3},{value:"\u7ec3\u4e60\u4e0e\u601d\u8003\uff08\u95ed\u5305\u4e0e\u533f\u540d\u51fd\u6570\uff09",id:"\u7ec3\u4e60\u4e0e\u601d\u8003\u95ed\u5305\u4e0e\u533f\u540d\u51fd\u6570",level:3},{value:"\u63cf\u8ff0\u7b26\uff08Descriptor\uff09",id:"\u63cf\u8ff0\u7b26descriptor",level:2},{value:"\u6982\u5ff5\uff08\u63cf\u8ff0\u7b26\uff09",id:"\u6982\u5ff5\u63cf\u8ff0\u7b26",level:3},{value:"\u5e94\u7528\u573a\u666f\uff08\u63cf\u8ff0\u7b26\uff09",id:"\u5e94\u7528\u573a\u666f\u63cf\u8ff0\u7b26",level:3},{value:"\u5165\u95e8\u793a\u4f8b\uff1a\u57fa\u7840\u63cf\u8ff0\u7b26",id:"\u5165\u95e8\u793a\u4f8b\u57fa\u7840\u63cf\u8ff0\u7b26",level:3},{value:"\u975e\u6570\u636e\u63cf\u8ff0\u7b26\u4e0e\u7f13\u5b58\u5c5e\u6027",id:"\u975e\u6570\u636e\u63cf\u8ff0\u7b26\u4e0e\u7f13\u5b58\u5c5e\u6027",level:3},{value:"<code>property</code> \u7684\u7b49\u4ef7\u63cf\u8ff0\u7b26\u5199\u6cd5",id:"property-\u7684\u7b49\u4ef7\u63cf\u8ff0\u7b26\u5199\u6cd5",level:3},{value:"\u5e38\u89c1\u5751\u4e0e\u6700\u4f73\u5b9e\u8df5\uff08\u63cf\u8ff0\u7b26\uff09",id:"\u5e38\u89c1\u5751\u4e0e\u6700\u4f73\u5b9e\u8df5\u63cf\u8ff0\u7b26",level:3},{value:"\u7ec3\u4e60\u4e0e\u601d\u8003\uff08\u63cf\u8ff0\u7b26\uff09",id:"\u7ec3\u4e60\u4e0e\u601d\u8003\u63cf\u8ff0\u7b26",level:3},{value:"\u7efc\u8ff0\u4e0e\u9009\u578b\u5efa\u8bae",id:"\u7efc\u8ff0\u4e0e\u9009\u578b\u5efa\u8bae",level:2}];function o(n){const e={blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",span:"span",strong:"strong",ul:"ul",...(0,i.R)(),...n.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(e.header,{children:(0,r.jsx)(e.h1,{id:"\u6df1\u5165\u7406\u89e3-python-\u9ad8\u7ea7\u7279\u6027",children:"\u6df1\u5165\u7406\u89e3 Python \u9ad8\u7ea7\u7279\u6027"})}),"\n",(0,r.jsx)(e.p,{children:"\u672c\u6587\u7cfb\u7edf\u6df1\u5165\u8bb2\u89e3\u4ee5\u4e0b\u6838\u5fc3\u4e3b\u9898\uff1a\u88c5\u9970\u5668\u3001\u751f\u6210\u5668\u4e0e\u8fed\u4ee3\u534f\u8bae\u3001\u4e0a\u4e0b\u6587\u7ba1\u7406\u5668\u3001\u5143\u7c7b\u3001\u95ed\u5305\u4e0e\u533f\u540d\u51fd\u6570\u3001\u63cf\u8ff0\u7b26\u3002\u914d\u5408\u5b9e\u7528\u793a\u4f8b\u3001\u5e38\u89c1\u5751\u4e0e\u6700\u4f73\u5b9e\u8df5\uff0c\u5e2e\u52a9\u4f60\u5728\u5de5\u7a0b\u4e2d\u5199\u51fa\u53ef\u7ef4\u62a4\u3001\u53ef\u6269\u5c55\u7684\u9ad8\u8d28\u91cf\u4ee3\u7801\u3002"}),"\n",(0,r.jsx)(e.h2,{id:"\u88c5\u9970\u5668decorator",children:"\u88c5\u9970\u5668\uff08Decorator\uff09"}),"\n",(0,r.jsx)(e.h3,{id:"\u6982\u5ff5\u88c5\u9970\u5668",children:"\u6982\u5ff5\uff08\u88c5\u9970\u5668\uff09"}),"\n",(0,r.jsx)(e.p,{children:"\u88c5\u9970\u5668\u662f\u4e00\u4e2a\u53ef\u8c03\u7528\u5bf9\u8c61\uff08\u51fd\u6570\u6216\u7c7b\uff09\uff0c\u63a5\u6536\u53e6\u4e00\u4e2a\u51fd\u6570/\u7c7b\u5e76\u8fd4\u56de\u5176\u201c\u589e\u5f3a\u7248\u201d\u3002\u5e38\u7528\u4e8e\u5904\u7406\u6a2a\u5207\u5173\u6ce8\u70b9\uff08\u65e5\u5fd7\u3001\u7f13\u5b58\u3001\u9274\u6743\u3001\u91cd\u8bd5\uff09\uff0c\u5e2e\u52a9\u5b9e\u73b0\u5173\u6ce8\u70b9\u5206\u79bb\u4e0e\u4ee3\u7801\u590d\u7528\u3002"}),"\n",(0,r.jsx)(e.h3,{id:"\u5e94\u7528\u573a\u666f\u88c5\u9970\u5668",children:"\u5e94\u7528\u573a\u666f\uff08\u88c5\u9970\u5668\uff09"}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"\u65e5\u5fd7\u4e0e\u57cb\u70b9\uff1a\u7edf\u4e00\u8bb0\u5f55\u8c03\u7528\u53c2\u6570\u4e0e\u8017\u65f6"}),"\n",(0,r.jsx)(e.li,{children:"\u7f13\u5b58\u4e0e\u53bb\u91cd\uff1a\u4e3a\u7eaf\u51fd\u6570\u7ed3\u679c\u52a0\u7f13\u5b58\uff08\u5982 LRU\uff09"}),"\n",(0,r.jsx)(e.li,{children:"\u9274\u6743\u4e0e\u9650\u6d41\uff1a\u8fdb\u5165\u51fd\u6570\u524d\u6821\u9a8c\u6743\u9650\u6216\u9891\u63a7"}),"\n",(0,r.jsx)(e.li,{children:"\u91cd\u8bd5\u4e0e\u8d85\u65f6\uff1a\u63d0\u9ad8\u7f51\u7edc\u4e0e I/O \u7684\u5065\u58ee\u6027"}),"\n",(0,r.jsx)(e.li,{children:"\u53c2\u6570\u6821\u9a8c\uff1a\u5728\u4e1a\u52a1\u524d\u7f6e\u5c42\u505a\u8f93\u5165\u68c0\u67e5"}),"\n"]}),"\n",(0,r.jsx)(e.h3,{id:"\u5165\u95e8\u793a\u4f8b\u88c5\u9970\u5668",children:"\u5165\u95e8\u793a\u4f8b\uff08\u88c5\u9970\u5668\uff09"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-python",children:'def deco(func):\n    def wrapper(*args, **kwargs):\n        print("before")\n        result = func(*args, **kwargs)\n        print("after")\n        return result\n    return wrapper\n\n@deco\ndef greet(name):\n    return f"Hi, {name}"\n\nprint(greet("Ada"))\n# before\n# after\n# Hi, Ada\n'})}),"\n",(0,r.jsx)(e.h3,{id:"\u57fa\u7840\u51fd\u6570\u88c5\u9970\u5668",children:"\u57fa\u7840\u51fd\u6570\u88c5\u9970\u5668"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-python",children:'from functools import wraps\nfrom typing import Callable, Any\n\ndef log_call(func: Callable[..., Any]) -> Callable[..., Any]:\n    """\u8bb0\u5f55\u51fd\u6570\u8c03\u7528\u7684\u7b80\u5355\u88c5\u9970\u5668\u3002"""\n    @wraps(func)\n    def wrapper(*args: Any, **kwargs: Any) -> Any:\n        print(f"[log_call] calling {func.__name__} args={args}, kwargs={kwargs}")\n        result = func(*args, **kwargs)\n        print(f"[log_call] {func.__name__} -> {result}")\n        return result\n    return wrapper\n\n@log_call\ndef add(a: int, b: int) -> int:\n    return a + b\n\nadd(2, 3)\n# [log_call] calling add args=(2, 3), kwargs={}\n# [log_call] add -> 5\n'})}),"\n",(0,r.jsxs)(e.p,{children:["\u8bf4\u660e\uff1a\u4f7f\u7528 ",(0,r.jsx)(e.code,{children:"@wraps"})," \u4fdd\u7559\u88ab\u88c5\u9970\u51fd\u6570\u7684\u5143\u6570\u636e\uff08\u540d\u79f0\u3001\u6587\u6863\u5b57\u7b26\u4e32\u3001\u6ce8\u89e3\uff09\u3002"]}),"\n",(0,r.jsx)(e.h3,{id:"\u5e26\u53c2\u6570\u7684\u88c5\u9970\u5668",children:"\u5e26\u53c2\u6570\u7684\u88c5\u9970\u5668"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-python",children:'from functools import wraps\nfrom typing import Callable, Any\n\n\ndef retry(times: int = 3) -> Callable[[Callable[..., Any]], Callable[..., Any]]:\n    """\u5e26\u53c2\u6570\u7684\u91cd\u8bd5\u88c5\u9970\u5668\u3002"""\n\n    def decorator(func: Callable[..., Any]) -> Callable[..., Any]:\n        @wraps(func)\n        def wrapper(*args: Any, **kwargs: Any) -> Any:\n            last_error: Exception | None = None\n            for _ in range(times):\n                try:\n                    print(f"\u7b2c{_ + 1}\u6b21\u91cd\u8bd5")\n                    return func(*args, **kwargs)\n                except Exception as exc:  # \u751f\u4ea7\u4e2d\u5e94\u6355\u83b7\u66f4\u5177\u4f53\u7684\u5f02\u5e38\n                    last_error = exc\n            raise last_error  # type: ignore[misc]\n\n        return wrapper\n\n    return decorator\n\n\n@retry(times=2)\ndef fragile() -> str:\n    raise RuntimeError("temporary failure")\n\n\nfragile()\n# \u7b2c1\u6b21\u91cd\u8bd5\n# \u7b2c2\u6b21\u91cd\u8bd5\n# Traceback (most recent call last):\n#   File "f:\\Project\\tmp\\demo.py", line 30, in <module>\n#     fragile()\n#   File "f:\\Project\\tmp\\demo.py", line 18, in wrapper\n#     raise last_error  # type: ignore[misc]\n#     ^^^^^^^^^^^^^^^^\n#   File "f:\\Project\\tmp\\demo.py", line 15, in wrapper\n#     return func(*args, **kwargs)\n#            ^^^^^^^^^^^^^^^^^^^^^\n#   File "f:\\Project\\tmp\\demo.py", line 27, in fragile\n#     raise RuntimeError("temporary failure")\n# RuntimeError: temporary failure\n'})}),"\n",(0,r.jsx)(e.h3,{id:"\u7c7b\u88c5\u9970\u5668",children:"\u7c7b\u88c5\u9970\u5668"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-python",children:'class register:\n    """\u5c06\u51fd\u6570\u6ce8\u518c\u5230\u7ed9\u5b9a\u5b57\u5178\u4e2d\u3002"""\n\n    def __init__(self, registry: dict[str, callable], name: str):\n        self.registry = registry\n        self.name = name\n\n    def __call__(self, func):\n        self.registry[self.name] = func\n        return func\n\n\nREGISTRY: dict[str, callable] = {}\n\n\n@register(REGISTRY, name="hello")\ndef hello() -> str:\n    return "world"\n\n\nprint(hello())\nprint(REGISTRY)\n# world\n# {\'hello\': <function hello at 0x00000164A414A2A0>}\n'})}),"\n",(0,r.jsx)(e.p,{children:"\u6267\u884c\u6d41\u7a0b\u89e3\u91ca\uff1a"}),"\n",(0,r.jsxs)(e.blockquote,{children:["\n",(0,r.jsx)(e.p,{children:"\u5f53\u4f60\u5199\uff1a"}),"\n",(0,r.jsx)(e.p,{children:'@register(REGISTRY, name="hello") def hello() -> str:    return "world"'}),"\n",(0,r.jsx)(e.p,{children:"Python \u5b9e\u9645\u4e0a\u4f1a\u6267\u884c\u4ee5\u4e0b\u4e24\u6b65\uff1a"}),"\n",(0,r.jsxs)(e.ol,{children:["\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.strong,{children:"\u5148\u521b\u5efa\u88c5\u9970\u5668\u5bf9\u8c61"}),"\uff1a"]}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.code,{children:'decorator = register(REGISTRY, name="hello")'})}),"\n",(0,r.jsxs)(e.p,{children:["\u8fd9\u4e00\u6b65\u8c03\u7528\u4e86 ",(0,r.jsx)(e.code,{children:"__init__"}),"\uff0c\u521b\u5efa\u4e86\u4e00\u4e2a ",(0,r.jsx)(e.code,{children:"register"})," \u7c7b\u7684\u5b9e\u4f8b\u3002"]}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.strong,{children:"\u518d\u8c03\u7528\u8fd9\u4e2a\u5bf9\u8c61"}),"\uff0c\u628a ",(0,r.jsx)(e.code,{children:"hello"})," \u51fd\u6570\u4f5c\u4e3a\u53c2\u6570\u4f20\u8fdb\u53bb\uff1a"]}),"\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.code,{children:"hello = decorator(hello)"}),'\uff0c\u5c31\u76f8\u5f53\u4e8eregister(REGISTRY, name="hello")()\uff0c\u8fd9\u5c31\u4f1a\u8c03\u7528call()']}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsxs)(e.p,{children:["\u8fd9\u4e00\u6b65\u5c31\u662f\u81ea\u52a8\u8c03\u7528\u4e86 ",(0,r.jsx)(e.code,{children:"__call__"})," \u65b9\u6cd5\uff01"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(e.h3,{id:"\u5e38\u89c1\u5751\u4e0e\u6700\u4f73\u5b9e\u8df5\u88c5\u9970\u5668",children:"\u5e38\u89c1\u5751\u4e0e\u6700\u4f73\u5b9e\u8df5\uff08\u88c5\u9970\u5668\uff09"}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:["\u4fdd\u7559\u5143\u6570\u636e\uff1a\u4f7f\u7528 ",(0,r.jsx)(e.code,{children:"functools.wraps"}),"\u3002"]}),"\n",(0,r.jsx)(e.li,{children:"\u8c28\u614e\u6355\u83b7\u5f02\u5e38\uff1a\u5c3d\u91cf\u6355\u83b7\u5177\u4f53\u5f02\u5e38\u7c7b\u578b\u3002"}),"\n",(0,r.jsx)(e.li,{children:"\u88c5\u9970\u5668\u53ef\u7ec4\u5408\uff1a\u5806\u53e0\u987a\u5e8f\u81ea\u4e0b\u800c\u4e0a\u6267\u884c\uff1b\u6ce8\u610f\u987a\u5e8f\u5e26\u6765\u7684\u526f\u4f5c\u7528\u3002"}),"\n",(0,r.jsx)(e.li,{children:"\u53c2\u6570\u4e0e\u8fd4\u56de\u503c\u7c7b\u578b\uff1a\u4e3a\u88c5\u9970\u5668\u51fd\u6570\u7b7e\u540d\u6dfb\u52a0\u7c7b\u578b\u6ce8\u89e3\uff0c\u5229\u4e8e\u9759\u6001\u68c0\u67e5\u3002"}),"\n"]}),"\n",(0,r.jsx)(e.h3,{id:"\u7ec3\u4e60\u4e0e\u601d\u8003\u88c5\u9970\u5668",children:"\u7ec3\u4e60\u4e0e\u601d\u8003\uff08\u88c5\u9970\u5668\uff09"}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"\u7f16\u5199\u8ba1\u65f6\u88c5\u9970\u5668\uff0c\u4e0e\u65e5\u5fd7\u88c5\u9970\u5668\u53e0\u52a0\u4f7f\u7528\uff0c\u89c2\u5bdf\u6267\u884c\u987a\u5e8f\u3002"}),"\n",(0,r.jsx)(e.li,{children:"\u5b9e\u73b0\u53c2\u6570\u6821\u9a8c\u88c5\u9970\u5668\uff0c\u9650\u5b9a\u67d0\u53c2\u6570\u5fc5\u987b\u4e3a\u6b63\u6574\u6570\u3002"}),"\n",(0,r.jsxs)(e.li,{children:["\u4f7f\u7528 ",(0,r.jsx)(e.code,{children:"functools.lru_cache"})," \u6216\u81ea\u5b9a\u4e49\u7f13\u5b58\u88c5\u9970\u5668\u4f18\u5316\u9012\u5f52\u6590\u6ce2\u90a3\u5951\u3002"]}),"\n"]}),"\n",(0,r.jsx)(e.h2,{id:"\u751f\u6210\u5668\u4e0e\u8fed\u4ee3generator--iteration",children:"\u751f\u6210\u5668\u4e0e\u8fed\u4ee3\uff08Generator & Iteration\uff09"}),"\n",(0,r.jsx)(e.h3,{id:"\u6982\u5ff5\u751f\u6210\u5668\u4e0e\u8fed\u4ee3",children:"\u6982\u5ff5\uff08\u751f\u6210\u5668\u4e0e\u8fed\u4ee3\uff09"}),"\n",(0,r.jsxs)(e.p,{children:["\u751f\u6210\u5668\u901a\u8fc7 ",(0,r.jsx)(e.code,{children:"yield"})," \u60f0\u6027\u5730\u4ea7\u751f\u5e8f\u5217\u5143\u7d20\uff0c\u6309\u9700\u8ba1\u7b97\u3001\u8282\u7701\u5185\u5b58\uff1b\u8fed\u4ee3\u534f\u8bae\u7531 ",(0,r.jsx)(e.code,{children:"__iter__"}),"\uff08\u8fd4\u56de\u8fed\u4ee3\u5668\uff09\u4e0e ",(0,r.jsx)(e.code,{children:"__next__"}),"\uff08\u8fd4\u56de\u4e0b\u4e00\u4e2a\u5143\u7d20\u6216\u629b\u51fa ",(0,r.jsx)(e.code,{children:"StopIteration"}),"\uff09\u7ec4\u6210\u3002"]}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:["\u751f\u6210\u5668\u662f\u4e00\u79cd\u7279\u6b8a\u7684\u51fd\u6570\uff0c\u5b83\u7528",(0,r.jsx)(e.code,{children:"yield"}),"\u5173\u952e\u5b57\u6765\u201c\u9010\u4e2a\u201d\u8fd4\u56de\u503c\u3002"]}),"\n",(0,r.jsxs)(e.li,{children:["\u5b83\u4e0d\u4f1a\u4e00\u6b21\u6027\u628a\u6240\u6709\u7ed3\u679c\u90fd\u7b97\u51fa\u6765\uff0c\u800c\u662f",(0,r.jsx)(e.strong,{children:"\u6bcf\u6b21\u8c03\u7528\u65f6\u624d\u7b97\u4e00\u4e2a"}),"\uff0c\u8fd9\u5c31\u53eb\u201c\u60f0\u6027\u201d\u3002"]}),"\n",(0,r.jsxs)(e.li,{children:["\u56e0\u4e3a\u53ea\u7b97\u5f53\u524d\u9700\u8981\u7684\u503c\uff0c\u6240\u4ee5",(0,r.jsx)(e.strong,{children:"\u975e\u5e38\u8282\u7701\u5185\u5b58"}),"\uff0c\u9002\u5408\u5904\u7406\u8d85\u5927\u6570\u636e\u96c6\u3002"]}),"\n"]}),"\n",(0,r.jsx)(e.h3,{id:"\u5e94\u7528\u573a\u666f\u751f\u6210\u5668\u4e0e\u8fed\u4ee3",children:"\u5e94\u7528\u573a\u666f\uff08\u751f\u6210\u5668\u4e0e\u8fed\u4ee3\uff09"}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"\u5904\u7406\u5927\u6587\u4ef6/\u6570\u636e\u6d41\uff1a\u9010\u884c/\u9010\u5757\u8bfb\u53d6\uff0c\u907f\u514d\u4e00\u6b21\u6027\u8f7d\u5165"}),"\n",(0,r.jsx)(e.li,{children:"\u6570\u636e\u7ba1\u9053\uff1a\u8fc7\u6ee4/\u6620\u5c04/\u805a\u5408\u7684\u60f0\u6027\u94fe\u5f0f\u5904\u7406"}),"\n",(0,r.jsx)(e.li,{children:"\u65e0\u9650\u5e8f\u5217\uff1a\u8ba1\u6570\u5668\u3001\u65f6\u95f4\u6d41\u7b49"}),"\n"]}),"\n",(0,r.jsx)(e.h3,{id:"\u5165\u95e8\u793a\u4f8b\u57fa\u7840\u751f\u6210\u5668",children:"\u5165\u95e8\u793a\u4f8b\uff1a\u57fa\u7840\u751f\u6210\u5668"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-python",children:"def count_up_to(limit: int):\n    current = 1\n    while current <= limit:\n        yield current\n        current += 1\n\n\nprint(count_up_to(3))\n\nfor n in count_up_to(3):\n    print(n)\n# <generator object count_up_to at 0x000002C6D0B14AC0>\n# 1\n# 2\n# 3\n"})}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-python",children:"def gen_nums():\n    for i in range(3):\n        yield i\n\ng = gen_nums()\nprint(next(g))  # \u8f93\u51fa 0\nprint(next(g))  # \u8f93\u51fa 1\n"})}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.span,{style:{color:"red"},children:"\u4e5f\u5c31\u662f\u8bf4yield\u8fd4\u56de\u7684\u662f\u4e00\u4e2a\u8fed\u4ee3\u5668\u5bf9\u8c61\u3002"})}),"\n",(0,r.jsx)(e.h3,{id:"\u751f\u6210\u5668\u8868\u8fbe\u5f0f\u4e0e\u60f0\u6027\u7ba1\u9053",children:"\u751f\u6210\u5668\u8868\u8fbe\u5f0f\u4e0e\u60f0\u6027\u7ba1\u9053"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-python",children:"squares = (x * x for x in range(10))  # \u751f\u6210\u5668\u8868\u8fbe\u5f0f\uff0c\u60f0\u6027\u8ba1\u7b97\u5e73\u65b9\nevens = (x for x in squares if x % 2 == 0)  # \u518d\u6b21\u8fc7\u6ee4\uff0c\u53ea\u4fdd\u7559\u5076\u6570\nprint(sum(evens))  # \u89e6\u53d1\u6574\u4e2a\u7ba1\u9053\uff0c\u9010\u4e2a\u53d6\u503c\u5e76\u6c42\u548c\n"})}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsxs)(e.span,{style:{color:"red"},children:["\u7528()\u62ec\u8d77\u6765\uff0c\u91cc\u9762\u518d\u4f7f\u7528for\uff0c\u751f\u6210\u7684\u662f\u4e00\u4e2a\u751f\u6210\u5668\u5bf9\u8c61\uff0c\u8fd9\u5728 Python \u4e2d\u53eb\u505a ",(0,r.jsx)(e.strong,{children:"\u751f\u6210\u5668\u8868\u8fbe\u5f0f"})]})}),"\n",(0,r.jsxs)(e.blockquote,{children:["\n",(0,r.jsxs)(e.p,{children:["\u6211\u4eec\u7528 ",(0,r.jsx)(e.code,{children:"sum(evens)"})," \u6765\u89e6\u53d1\u6574\u4e2a\u6d41\u7a0b\uff0c\u6765\u770b\u770b\u6bcf\u4e00\u6b65\u662f\u600e\u4e48\u201c\u61d2\u60f0\u201d\u7684\uff1a"]}),"\n",(0,r.jsx)(e.p,{children:"\u7b2c\u4e00\u6b21\u8fed\u4ee3\uff1a"}),"\n",(0,r.jsxs)(e.ol,{children:["\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.code,{children:"sum()"})," \u5411 ",(0,r.jsx)(e.code,{children:"evens"})," \u8bf7\u6c42\u4e00\u4e2a\u503c \u2192 ",(0,r.jsx)(e.code,{children:"evens"})," \u5411 ",(0,r.jsx)(e.code,{children:"squares"})," \u8bf7\u6c42\u4e00\u4e2a\u503c"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.code,{children:"squares"})," \u8ba1\u7b97 ",(0,r.jsx)(e.code,{children:"0 * 0 = 0"}),"\uff0c\u8fd4\u56de\u7ed9 ",(0,r.jsx)(e.code,{children:"evens"})]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.code,{children:"evens"})," \u5224\u65ad ",(0,r.jsx)(e.code,{children:"0 % 2 == 0"})," \u2705 \u2192 \u8fd4\u56de ",(0,r.jsx)(e.code,{children:"0"})," \u7ed9 ",(0,r.jsx)(e.code,{children:"sum"})]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.code,{children:"sum"})," \u52a0\u5165\u603b\u548c"]}),"\n"]}),"\n",(0,r.jsx)(e.p,{children:"\u7b2c\u4e8c\u6b21\u8fed\u4ee3\uff1a"}),"\n",(0,r.jsxs)(e.ol,{children:["\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.code,{children:"sum()"})," \u518d\u6b21\u8bf7\u6c42 \u2192 ",(0,r.jsx)(e.code,{children:"evens"})," \u518d\u6b21\u8bf7\u6c42 \u2192 ",(0,r.jsx)(e.code,{children:"squares"})," \u8ba1\u7b97 ",(0,r.jsx)(e.code,{children:"1 * 1 = 1"})]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.code,{children:"evens"})," \u5224\u65ad ",(0,r.jsx)(e.code,{children:"1 % 2 == 0"})," \u274c \u2192 \u4e22\u5f03\uff0c\u7ee7\u7eed\u8bf7\u6c42\u4e0b\u4e00\u4e2a"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.code,{children:"squares"})," \u8ba1\u7b97 ",(0,r.jsx)(e.code,{children:"2 * 2 = 4"})," \u2192 ",(0,r.jsx)(e.code,{children:"evens"})," \u5224\u65ad \u2705 \u2192 \u8fd4\u56de ",(0,r.jsx)(e.code,{children:"4"})," \u7ed9 ",(0,r.jsx)(e.code,{children:"sum"})]}),"\n"]}),"\n",(0,r.jsxs)(e.p,{children:["...\u5982\u6b64\u7c7b\u63a8\uff0c\u76f4\u5230 ",(0,r.jsx)(e.code,{children:"squares"})," \u8017\u5c3d\u3002"]}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.span,{style:{color:"red"},children:"\u4e5f\u5c31\u662f\u8bf4\uff0c\u8fd9\u79cd\u5199\u6cd5\u4e0d\u662f\u4e00\u6b21\u6027\u8ba1\u7b97\u6240\u6709\u7684\u5e73\u65b9\u548c\u4e00\u6b21\u6027\u8fc7\u6ee4\u6240\u6709\u7684\u5076\u6570\u3002\u800c\u4e00\u6b21\u6027\u8ba1\u7b97\u7684\u4ee3\u7801\u5982\u4e0b\uff1a"})}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-python",children:"squares = [x * x for x in range(10)]\nevens = [x for x in squares if x % 2 == 0]\nprint(sum(evens))\n"})}),"\n"]}),"\n",(0,r.jsxs)(e.h3,{id:"yield-from-\u59d4\u6258",children:[(0,r.jsx)(e.code,{children:"yield from"})," \u59d4\u6258"]}),"\n",(0,r.jsxs)(e.p,{children:["\u662f\u7528\u6765 ",(0,r.jsx)(e.strong,{children:"\u59d4\u6258\u5b50\u751f\u6210\u5668"})," \u7684\u8bed\u6cd5\uff0c\u5b83\u53ef\u4ee5\u8ba9\u4e00\u4e2a\u751f\u6210\u5668\u81ea\u52a8\u8fed\u4ee3\u53e6\u4e00\u4e2a\u751f\u6210\u5668\u6216\u53ef\u8fed\u4ee3\u5bf9\u8c61\uff0c",(0,r.jsx)(e.strong,{children:"\u7b80\u5316\u4ee3\u7801\u7ed3\u6784"}),"\uff0c",(0,r.jsx)(e.strong,{children:"\u5b9e\u73b0\u5d4c\u5957\u751f\u6210\u5668\u7684\u534f\u4f5c"}),"\u3002"]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-python",children:"def flatten(list_of_lists):\n    for sub in list_of_lists:\n        yield from sub\n\nprint(list(flatten([[1, 2], [3], [], [4, 5]])))\n# [1, 2, 3, 4, 5]\n"})}),"\n",(0,r.jsx)(e.p,{children:"\u4e3a\u4ec0\u4e48\u9700\u8981\uff1f"}),"\n",(0,r.jsxs)(e.p,{children:["\u5047\u8bbe\u4f60\u6709\u4e00\u4e2a\u751f\u6210\u5668 ",(0,r.jsx)(e.code,{children:"gen_a()"}),"\uff0c\u5b83\u5185\u90e8\u9700\u8981\u8c03\u7528\u53e6\u4e00\u4e2a\u751f\u6210\u5668 ",(0,r.jsx)(e.code,{children:"gen_b()"}),"\uff0c\u4f20\u7edf\u5199\u6cd5\u662f\uff1a"]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-python",children:"def gen_a():\n    for value in gen_b():\n        yield value\n"})}),"\n",(0,r.jsxs)(e.p,{children:["\u8fd9\u5f88\u5570\u55e6\u3002\u7528 ",(0,r.jsx)(e.code,{children:"yield from"})," \u53ef\u4ee5\u7b80\u5316\u4e3a\uff1a"]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-python",children:"def gen_a():\n    yield from gen_b()\n"})}),"\n",(0,r.jsx)(e.h3,{id:"\u8fed\u4ee3\u534f\u8bae\u81ea\u5b9a\u4e49\u8fed\u4ee3\u5668",children:"\u8fed\u4ee3\u534f\u8bae\uff1a\u81ea\u5b9a\u4e49\u8fed\u4ee3\u5668"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-python",children:"from typing import Iterator\n\nclass Countdown:\n    def __init__(self, start: int):\n        self.current = start\n\n    def __iter__(self) -> Iterator[int]:\n        return self\n\n    def __next__(self) -> int:\n        if self.current <= 0:\n            raise StopIteration\n        value = self.current\n        self.current -= 1\n        return value\n\nprint(list(Countdown(3)))\n"})}),"\n",(0,r.jsxs)(e.h3,{id:"\u751f\u6210\u5668\u7684\u9ad8\u7ea7\u7528\u6cd5sendthrowclose",children:["\u751f\u6210\u5668\u7684\u9ad8\u7ea7\u7528\u6cd5\uff1a",(0,r.jsx)(e.code,{children:"send"}),"\u3001",(0,r.jsx)(e.code,{children:"throw"}),"\u3001",(0,r.jsx)(e.code,{children:"close"})]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-python",children:"def accumulator():\n    total = 0\n    while True:\n        value = yield total\n        if value is None:\n            break\n        total += value\n\ngen = accumulator()\nprint(next(gen))       # \u542f\u52a8\u751f\u6210\u5668\uff0c\u5f97\u5230\u521d\u59cb total\nprint(gen.send(10))    # \u53d1\u9001 10\uff0c\u5f97\u5230\u65b0 total\nprint(gen.send(5))\ngen.close()\n# 0\n# 10\n# 15\n"})}),"\n",(0,r.jsx)(e.h3,{id:"\u5e38\u89c1\u5751\u4e0e\u6700\u4f73\u5b9e\u8df5\u751f\u6210\u5668",children:"\u5e38\u89c1\u5751\u4e0e\u6700\u4f73\u5b9e\u8df5\uff08\u751f\u6210\u5668\uff09"}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"\u751f\u6210\u5668\u4e00\u65e6\u8017\u5c3d\u4e0d\u53ef\u590d\u7528\uff1b\u9700\u8981\u590d\u7528\u65f6\u5c01\u88c5\u4e3a\u53ef\u91cd\u590d\u521b\u5efa\u7684\u65b0\u751f\u6210\u5668\u51fd\u6570\u3002"}),"\n",(0,r.jsxs)(e.li,{children:["\u9700\u8981\u968f\u673a\u8bbf\u95ee\u65f6\u4f7f\u7528\u5217\u8868\u6216 ",(0,r.jsx)(e.code,{children:"deque"}),"\uff0c\u4e0d\u8981\u6ee5\u7528\u751f\u6210\u5668\u3002"]}),"\n",(0,r.jsxs)(e.li,{children:["\u4f7f\u7528 ",(0,r.jsx)(e.code,{children:"itertools"})," \u63d0\u5347\u53ef\u8bfb\u6027\u4e0e\u6027\u80fd\uff08\u5982 ",(0,r.jsx)(e.code,{children:"islice"}),"\u3001",(0,r.jsx)(e.code,{children:"chain"}),"\u3001",(0,r.jsx)(e.code,{children:"groupby"}),"\uff09\u3002"]}),"\n"]}),"\n",(0,r.jsx)(e.h3,{id:"\u7ec3\u4e60\u4e0e\u601d\u8003\u751f\u6210\u5668",children:"\u7ec3\u4e60\u4e0e\u601d\u8003\uff08\u751f\u6210\u5668\uff09"}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"\u7f16\u5199\u751f\u6210\u5668\uff0c\u8bfb\u53d6\u5927\u6587\u4ef6\u5e76\u4ec5\u8fd4\u56de\u5305\u542b\u5173\u952e\u8bcd\u7684\u884c\u3002"}),"\n",(0,r.jsxs)(e.li,{children:["\u7528\u751f\u6210\u5668\u8868\u8fbe\u5f0f\u4e0e ",(0,r.jsx)(e.code,{children:"sum"})," \u8ba1\u7b97 1..N \u7684\u5e73\u65b9\u548c\uff0c\u6bd4\u8f83\u5185\u5b58\u5360\u7528\u3002"]}),"\n",(0,r.jsxs)(e.li,{children:["\u4f7f\u7528 ",(0,r.jsx)(e.code,{children:"yield from"})," \u5c06\u591a\u5c42\u5d4c\u5957\u5217\u8868\u62cd\u5e73\u3002"]}),"\n"]}),"\n",(0,r.jsx)(e.h2,{id:"\u4e0a\u4e0b\u6587\u7ba1\u7406\u5668context-manager",children:"\u4e0a\u4e0b\u6587\u7ba1\u7406\u5668\uff08Context Manager\uff09"}),"\n",(0,r.jsx)(e.h3,{id:"\u6982\u5ff5\u4e0a\u4e0b\u6587\u7ba1\u7406\u5668",children:"\u6982\u5ff5\uff08\u4e0a\u4e0b\u6587\u7ba1\u7406\u5668\uff09"}),"\n",(0,r.jsx)(e.p,{children:"\u4e0a\u4e0b\u6587\u7ba1\u7406\u5668\u5728\u8fdb\u5165/\u9000\u51fa\u4ee3\u7801\u5757\u65f6\u81ea\u52a8\u83b7\u53d6/\u91ca\u653e\u8d44\u6e90\uff0c\u51cf\u5c11\u6837\u677f\u4ee3\u7801\u5e76\u907f\u514d\u8d44\u6e90\u6cc4\u6f0f\u3002"}),"\n",(0,r.jsx)(e.h3,{id:"\u5e94\u7528\u573a\u666f\u4e0a\u4e0b\u6587\u7ba1\u7406\u5668",children:"\u5e94\u7528\u573a\u666f\uff08\u4e0a\u4e0b\u6587\u7ba1\u7406\u5668\uff09"}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"\u6587\u4ef6\u3001\u7f51\u7edc\u8fde\u63a5\u4e0e\u6570\u636e\u5e93\u4e8b\u52a1\u7684\u5b89\u5168\u7ba1\u7406"}),"\n",(0,r.jsx)(e.li,{children:"\u7ebf\u7a0b/\u8fdb\u7a0b\u9501\u7684\u6210\u5bf9\u83b7\u53d6\u4e0e\u91ca\u653e"}),"\n",(0,r.jsx)(e.li,{children:"\u4e34\u65f6\u4fee\u6539\u5168\u5c40\u72b6\u6001\uff08\u5de5\u4f5c\u76ee\u5f55\u3001\u73af\u5883\u53d8\u91cf\uff09\u5e76\u5728\u9000\u51fa\u65f6\u6062\u590d"}),"\n"]}),"\n",(0,r.jsxs)(e.h3,{id:"\u5165\u95e8\u793a\u4f8b__enter__--__exit__",children:["\u5165\u95e8\u793a\u4f8b\uff1a",(0,r.jsx)(e.code,{children:"__enter__"})," / ",(0,r.jsx)(e.code,{children:"__exit__"})]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-python",children:'class managed_file:\n    def __init__(self, path: str, mode: str = "r", encoding: str = "utf-8"):\n        self.path = path\n        self.mode = mode\n        self.encoding = encoding\n        self._f = None\n\n    def __enter__(self):\n        self._f = open(self.path, self.mode, encoding=self.encoding)\n        return self._f\n\n    def __exit__(self, exc_type, exc, tb):\n        if self._f:\n            self._f.close()\n        # \u8fd4\u56de False \u8ba9\u5f02\u5e38\u7ee7\u7eed\u5411\u5916\u4f20\u64ad\n        return False\n\nwith managed_file("/tmp/demo.txt", "w") as f:\n    f.write("hello")\n'})}),"\n",(0,r.jsxs)(e.h3,{id:"contextlib-\u5de5\u5177\u96c6",children:[(0,r.jsx)(e.code,{children:"contextlib"})," \u5de5\u5177\u96c6"]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-python",children:'from contextlib import contextmanager, suppress, ExitStack\n\n@contextmanager\ndef open_file(path: str, mode: str = "r", encoding: str = "utf-8"):\n    f = open(path, mode, encoding=encoding)\n    try:\n        yield f\n    finally:\n        f.close()\n\nwith suppress(FileNotFoundError):\n    with open_file("missing.txt") as f:\n        print(f.read())\n\nwith ExitStack() as stack:\n    files = [stack.enter_context(open_file(p)) for p in ["a.txt", "b.txt"]]\n'})}),"\n",(0,r.jsx)(e.h3,{id:"\u5e38\u89c1\u5751\u4e0e\u6700\u4f73\u5b9e\u8df5\u4e0a\u4e0b\u6587\u7ba1\u7406\u5668",children:"\u5e38\u89c1\u5751\u4e0e\u6700\u4f73\u5b9e\u8df5\uff08\u4e0a\u4e0b\u6587\u7ba1\u7406\u5668\uff09"}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:["\u786e\u4fdd ",(0,r.jsx)(e.code,{children:"__exit__"})," \u6216 ",(0,r.jsx)(e.code,{children:"finally"})," \u4e2d\u5bf9\u8d44\u6e90\u7684\u65e0\u6761\u4ef6\u91ca\u653e\u3002"]}),"\n",(0,r.jsx)(e.li,{children:"\u5f02\u5e38\u5904\u7406\u7b56\u7565\u8981\u660e\u786e\uff1a\u541e\u6389\u8fd8\u662f\u5411\u5916\u4f20\u64ad\uff08\u8fd4\u56de\u503c\u51b3\u5b9a\uff09\u3002"}),"\n",(0,r.jsxs)(e.li,{children:["\u591a\u8d44\u6e90\u7ba1\u7406\u4f18\u5148\u8003\u8651 ",(0,r.jsx)(e.code,{children:"ExitStack"}),"\u3002"]}),"\n"]}),"\n",(0,r.jsx)(e.h3,{id:"\u7ec3\u4e60\u4e0e\u601d\u8003\u4e0a\u4e0b\u6587\u7ba1\u7406\u5668",children:"\u7ec3\u4e60\u4e0e\u601d\u8003\uff08\u4e0a\u4e0b\u6587\u7ba1\u7406\u5668\uff09"}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"\u81ea\u5b9a\u4e49\u4e00\u4e2a\u8ba1\u65f6\u4e0a\u4e0b\u6587\u7ba1\u7406\u5668\uff0c\u6253\u5370 with \u4ee3\u7801\u5757\u8017\u65f6\u3002"}),"\n",(0,r.jsxs)(e.li,{children:["\u4f7f\u7528 ",(0,r.jsx)(e.code,{children:"contextmanager"})," \u4e34\u65f6\u5207\u6362\u5f53\u524d\u5de5\u4f5c\u76ee\u5f55\u5e76\u5728\u9000\u51fa\u65f6\u6062\u590d\u3002"]}),"\n",(0,r.jsxs)(e.li,{children:["\u7ed3\u5408 ",(0,r.jsx)(e.code,{children:"ExitStack"})," \u540c\u65f6\u7ba1\u7406\u591a\u4e2a\u6587\u4ef6\u8d44\u6e90\u3002"]}),"\n"]}),"\n",(0,r.jsx)(e.h2,{id:"\u5143\u7c7bmetaclass",children:"\u5143\u7c7b\uff08Metaclass\uff09"}),"\n",(0,r.jsx)(e.h3,{id:"\u6982\u5ff5\u5143\u7c7b",children:"\u6982\u5ff5\uff08\u5143\u7c7b\uff09"}),"\n",(0,r.jsxs)(e.p,{children:["\u5143\u7c7b\u662f\u201c\u521b\u5efa\u7c7b\u7684\u7c7b\u201d\uff0c\u7528\u4e8e\u5b9a\u5236\u7c7b\u7684\u521b\u5efa\u8fc7\u7a0b\uff08\u5982\u6ce8\u5165\u5c5e\u6027\u3001\u6ce8\u518c\u3001\u63a5\u53e3\u6821\u9a8c\uff09\u3002Python \u4e2d\u9ed8\u8ba4\u5143\u7c7b\u4e3a ",(0,r.jsx)(e.code,{children:"type"}),"\u3002"]}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.code,{children:"\u5bf9\u8c61\uff08\u5b9e\u4f8b\uff09 \u2190\u2014\u2014 \u7531 \u2014\u2014 \u7c7b\uff08class\uff09 \u2190\u2014\u2014 \u7531 \u2014\u2014 \u5143\u7c7b\uff08metaclass\uff09"})}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsxs)(e.strong,{children:["\u4f60\u53ef\u4ee5\u901a\u8fc7\u7ee7\u627f ",(0,r.jsx)(e.code,{children:"type"})," \u6765\u521b\u5efa\u81ea\u5df1\u7684\u5143\u7c7b"]})}),"\n",(0,r.jsx)(e.h3,{id:"\u5e94\u7528\u573a\u666f\u5143\u7c7b",children:"\u5e94\u7528\u573a\u666f\uff08\u5143\u7c7b\uff09"}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"\u63a5\u53e3\u7ea6\u675f\uff1a\u521b\u5efa\u65f6\u5f3a\u5236\u5b58\u5728\u7279\u5b9a\u65b9\u6cd5/\u5c5e\u6027"}),"\n",(0,r.jsx)(e.li,{children:"\u81ea\u52a8\u6ce8\u518c\uff1a\u6846\u67b6\u4e2d\u81ea\u52a8\u6536\u96c6\u6d3e\u751f\u7c7b"}),"\n",(0,r.jsx)(e.li,{children:"\u81ea\u52a8\u6ce8\u5165\uff1a\u6279\u91cf\u6dfb\u52a0\u65b9\u6cd5\u3001\u7ed1\u5b9a\u914d\u7f6e"}),"\n"]}),"\n",(0,r.jsx)(e.h3,{id:"\u81ea\u5b9a\u4e49\u5143\u7c7b\u5f3a\u5236\u7c7b\u5c5e\u6027\u5b58\u5728",children:"\u81ea\u5b9a\u4e49\u5143\u7c7b\uff1a\u5f3a\u5236\u7c7b\u5c5e\u6027\u5b58\u5728"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-python",children:'class RequireAttrs(type):\n    required_attrs = {"execute"}\n\n    def __new__(mcls, name, bases, namespace):\n        cls = super().__new__(mcls, name, bases, namespace)\n        if name != "Base" and not RequireAttrs.required_attrs.issubset(namespace):\n            missing = RequireAttrs.required_attrs - set(namespace)\n            raise TypeError(f"Class {name} missing required attrs: {missing}")\n        return cls\n\nclass Base(metaclass=RequireAttrs):\n    pass\n\nclass Job(Base):\n    def execute(self) -> None:\n        print("run")\n'})}),"\n",(0,r.jsx)(e.h3,{id:"\u5355\u4f8b\u4f5c\u4e3a\u5143\u7c7b\u5b9e\u73b0",children:"\u5355\u4f8b\u4f5c\u4e3a\u5143\u7c7b\u5b9e\u73b0"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-python",children:"class Singleton(type):\n    _instances: dict[type, object] = {}\n\n    def __call__(cls, *args, **kwargs):\n        if cls not in cls._instances:\n            cls._instances[cls] = super().__call__(*args, **kwargs)\n        return cls._instances[cls]\n\nclass Config(metaclass=Singleton):\n    def __init__(self):\n        self.values: dict[str, str] = {}\n"})}),"\n",(0,r.jsx)(e.h3,{id:"\u4fee\u6539\u7c7b\u7684\u5c5e\u6027\u6216\u65b9\u6cd5",children:"\u4fee\u6539\u7c7b\u7684\u5c5e\u6027\u6216\u65b9\u6cd5"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-python",children:"class AutoPatchMeta(type):\n    def __new__(cls, name, bases, attrs):\n        # \u6dfb\u52a0\u7edf\u4e00\u5c5e\u6027\n        attrs['version'] = '1.0'\n\n        # \u5305\u88c5\u6240\u6709\u65b9\u6cd5\uff0c\u52a0\u65e5\u5fd7\n        for key, val in attrs.items():\n            if callable(val):\n                def wrapper(func):\n                    def inner(*args, **kwargs):\n                        print(f\"[LOG] \u8c03\u7528\u65b9\u6cd5\uff1a{func.__name__}\")\n                        return func(*args, **kwargs)\n                    return inner    # \u8c03\u7528\u8005\u5c06\u53c2\u6570\u4f20\u9012\u7ed9inner\n                attrs[key] = wrapper(val)\n\n        return super().__new__(cls, name, bases, attrs)\n\nclass MyService(metaclass=AutoPatchMeta):\n    def run(self):\n        print(\"\u670d\u52a1\u8fd0\u884c\u4e2d\")\n\nprint(MyService.version)  # \u8f93\u51fa\uff1a1.0\nMyService().run()\n"})}),"\n",(0,r.jsx)(e.h3,{id:"\u81ea\u52a8\u6ce8\u518c",children:"\u81ea\u52a8\u6ce8\u518c"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-python",children:"CLASS_REGISTRY = {}\n\nclass AutoRegisterMeta(type):\n    def __new__(cls, name, bases, attrs):\n        new_cls = super().__new__(cls, name, bases, attrs)\n        CLASS_REGISTRY[name] = new_cls\n        return new_cls\n\nclass PluginBase(metaclass=AutoRegisterMeta):\n    pass\n\nclass MarkdownParser(PluginBase):\n    pass\n\nclass VideoProcessor(PluginBase):\n    pass\n\nprint(CLASS_REGISTRY)\n"})}),"\n",(0,r.jsx)(e.h3,{id:"\u5e38\u89c1\u5751\u4e0e\u6700\u4f73\u5b9e\u8df5\u5143\u7c7b",children:"\u5e38\u89c1\u5751\u4e0e\u6700\u4f73\u5b9e\u8df5\uff08\u5143\u7c7b\uff09"}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"\u4f18\u5148\u4f7f\u7528\u7c7b\u88c5\u9970\u5668\uff1b\u53ea\u6709\u5728\u9700\u8981\u63a7\u5236\u201c\u7c7b\u521b\u5efa\u9636\u6bb5\u201d\u65f6\u624d\u4f7f\u7528\u5143\u7c7b\u3002"}),"\n",(0,r.jsx)(e.li,{children:"\u907f\u514d\u8fc7\u5ea6\u9b54\u6cd5\uff1b\u4fdd\u6301 API \u663e\u5f0f\uff0c\u964d\u4f4e\u56e2\u961f\u5fc3\u667a\u8d1f\u62c5\u3002"}),"\n"]}),"\n",(0,r.jsx)(e.h2,{id:"\u95ed\u5305\u4e0e\u533f\u540d\u51fd\u6570closure--lambda",children:"\u95ed\u5305\u4e0e\u533f\u540d\u51fd\u6570\uff08Closure & Lambda\uff09"}),"\n",(0,r.jsx)(e.h3,{id:"\u6982\u5ff5\u95ed\u5305\u4e0e\u533f\u540d\u51fd\u6570",children:"\u6982\u5ff5\uff08\u95ed\u5305\u4e0e\u533f\u540d\u51fd\u6570\uff09"}),"\n",(0,r.jsxs)(e.p,{children:["\u95ed\u5305\u662f\u4e00\u4e2a\u51fd\u6570\uff0c\u5b83\u201c\u8bb0\u4f4f\u201d\u4e86\u5b83\u5b9a\u4e49\u65f6\u6240\u5728\u7684\u4f5c\u7528\u57df\u4e2d\u7684\u53d8\u91cf\uff0c\u5373\u4f7f\u8fd9\u4e2a\u4f5c\u7528\u57df\u5df2\u7ecf\u7ed3\u675f\u3002\u6362\u53e5\u8bdd\u8bf4\uff0c",(0,r.jsx)(e.strong,{children:"\u95ed\u5305 = \u51fd\u6570 + \u5916\u90e8\u53d8\u91cf\u7684\u7ed1\u5b9a\u73af\u5883"}),"\u3002"]}),"\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.code,{children:"nonlocal"}),"\u7528\u6765\u5728",(0,r.jsx)(e.strong,{children:"\u5d4c\u5957\u51fd\u6570"}),"\u4e2d\u58f0\u660e\u53d8\u91cf\u5c5e\u4e8e\u5916\u5c42\u51fd\u6570\u4f5c\u7528\u57df\uff0c\u800c\u4e0d\u662f\u5f53\u524d\u51fd\u6570\u6216\u5168\u5c40\u4f5c\u7528\u57df\u3002\u5b83\u7684\u4f5c\u7528\u662f\uff1a",(0,r.jsx)(e.strong,{children:"\u5141\u8bb8\u5185\u90e8\u51fd\u6570\u4fee\u6539\u5916\u90e8\u51fd\u6570\u7684\u5c40\u90e8\u53d8\u91cf"}),"\u3002"]}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"\u521b\u5efa\u95ed\u5305\u7684\u4e09\u4e2a\u6761\u4ef6"})}),"\n",(0,r.jsxs)(e.ol,{children:["\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"\u5d4c\u5957\u51fd\u6570"}),"\uff1a\u51fd\u6570\u5185\u90e8\u5b9a\u4e49\u53e6\u4e00\u4e2a\u51fd\u6570"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"\u5f15\u7528\u5916\u90e8\u53d8\u91cf"}),"\uff1a\u5185\u5c42\u51fd\u6570\u4f7f\u7528\u4e86\u5916\u5c42\u51fd\u6570\u7684\u53d8\u91cf"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"\u8fd4\u56de\u5185\u5c42\u51fd\u6570"}),"\uff1a\u5916\u5c42\u51fd\u6570\u8fd4\u56de\u5185\u5c42\u51fd\u6570\u5bf9\u8c61"]}),"\n"]}),"\n",(0,r.jsx)(e.h3,{id:"\u5e94\u7528\u573a\u666f\u95ed\u5305\u4e0e\u533f\u540d\u51fd\u6570",children:"\u5e94\u7528\u573a\u666f\uff08\u95ed\u5305\u4e0e\u533f\u540d\u51fd\u6570\uff09"}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"\u8ba1\u6570\u5668\u3001\u9650\u6d41\u5668\u7b49\u643a\u5e26\u79c1\u6709\u72b6\u6001\u7684\u51fd\u6570"}),"\n",(0,r.jsx)(e.li,{children:"\u4f5c\u4e3a\u56de\u8c03\u3001\u6392\u5e8f key\u3001\u5206\u7ec4 key \u7684\u7b80\u77ed\u8868\u8fbe\u5f0f"}),"\n",(0,r.jsx)(e.li,{children:"\u9ad8\u9636\u51fd\u6570\uff1a\u6309\u9700\u201c\u9884\u914d\u201d\u90e8\u5206\u53c2\u6570"}),"\n"]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-python",children:"def make_counter(start=0):\n    count = start\n\n    def counter():\n        nonlocal count\n        count += 1\n        return count\n\n    return counter\n\nc1 = make_counter(10)\nprint(c1())  # 11\nprint(c1())  # 12\n\nc2 = make_counter(100)\nprint(c2())  # 101\n"})}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.code,{children:"counter()"}),"\u662f\u95ed\u5305\uff0c\u5b83\u201c\u8bb0\u4f4f\u201d\u4e86",(0,r.jsx)(e.code,{children:"count"}),"\u7684\u503c"]}),"\n",(0,r.jsxs)(e.li,{children:["\u5373\u4f7f ",(0,r.jsx)(e.code,{children:"make_counter()"})," \u5df2\u7ecf\u6267\u884c\u5b8c\u6bd5\uff0c",(0,r.jsx)(e.code,{children:"count"})," \u4ecd\u7136\u5b58\u5728\u4e8e ",(0,r.jsx)(e.code,{children:"counter()"})," \u7684\u73af\u5883\u4e2d"]}),"\n",(0,r.jsx)(e.li,{children:"\u6bcf\u4e2a\u95ed\u5305\u5b9e\u4f8b\u90fd\u6709\u81ea\u5df1\u7684\u79c1\u6709\u72b6\u6001"}),"\n"]}),"\n",(0,r.jsxs)(e.h3,{id:"\u95ed\u5305\u4e0e-nonlocal",children:["\u95ed\u5305\u4e0e ",(0,r.jsx)(e.code,{children:"nonlocal"})]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-python",children:"from typing import Callable\n\ndef make_counter(start: int = 0) -> Callable[[], int]:\n    current = start\n    def inc() -> int:\n        nonlocal current\n        current += 1\n        return current\n    return inc\n\nc = make_counter(10)\nprint(c())  # 11\nprint(c())  # 12\n"})}),"\n",(0,r.jsx)(e.h3,{id:"\u95ed\u5305\u7684\u5ef6\u8fdf\u7ed1\u5b9a\u9677\u9631\u4e0e\u4fee\u590d",children:"\u95ed\u5305\u7684\u5ef6\u8fdf\u7ed1\u5b9a\u9677\u9631\u4e0e\u4fee\u590d"}),"\n",(0,r.jsxs)(e.p,{children:["\u95ed\u5305\u4e2d\u7684\u53d8\u91cf\u4e0d\u662f\u5728\u5b9a\u4e49\u65f6\u7ed1\u5b9a\u7684\uff0c\u800c\u662f\u5728",(0,r.jsx)(e.strong,{children:"\u8c03\u7528\u65f6"}),"\u624d\u67e5\u627e\u5176\u503c\u3002\u8fd9\u610f\u5473\u7740\uff1a\u5982\u679c\u4f60\u5728\u5faa\u73af\u4e2d\u521b\u5efa\u591a\u4e2a\u95ed\u5305\u51fd\u6570\uff0c\u5b83\u4eec",(0,r.jsx)(e.strong,{children:"\u5171\u4eab\u540c\u4e00\u4e2a\u5916\u90e8\u53d8\u91cf\u5f15\u7528"}),"\uff0c\u800c\u4e0d\u662f\u5404\u81ea\u201c\u51bb\u7ed3\u201d\u5f53\u65f6\u7684\u503c\u3002"]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-python",children:"funcs = []\nfor i in range(3):\n    funcs.append(lambda x: x * i)\n\nprint([f(2) for f in funcs])  # \u274c \u8f93\u51fa\uff1a[4, 4, 4]\uff0c\u800c\u4e0d\u662f [0, 2, 4]\n"})}),"\n",(0,r.jsx)(e.p,{children:"\ud83d\udd0d \u4e3a\u4ec0\u4e48\u9519\u4e86\uff1f"}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:["\u6240\u6709 ",(0,r.jsx)(e.code,{children:"lambda"})," \u90fd\u5f15\u7528\u4e86\u540c\u4e00\u4e2a ",(0,r.jsx)(e.code,{children:"i"})]}),"\n",(0,r.jsxs)(e.li,{children:["\u5faa\u73af\u7ed3\u675f\u65f6 ",(0,r.jsx)(e.code,{children:"i = 2"})]}),"\n",(0,r.jsxs)(e.li,{children:["\u6240\u4ee5\u6bcf\u4e2a\u51fd\u6570\u90fd\u53d8\u6210\u4e86 ",(0,r.jsx)(e.code,{children:"lambda x: x * 2"})]}),"\n"]}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"\u4fee\u590d\uff1a"})}),"\n",(0,r.jsx)(e.p,{children:"\u65b9\u6cd5\u4e00\uff1a\u9ed8\u8ba4\u53c2\u6570\u7ed1\u5b9a\uff08\u63a8\u8350\uff09"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-python",children:"funcs = []\nfor i in range(3):\n    funcs.append(lambda x, i=i: x * i)\n\nprint([f(2) for f in funcs])  # \u2705 \u8f93\u51fa\uff1a[0, 2, 4]\n"})}),"\n",(0,r.jsx)(e.p,{children:"\u89e3\u91ca\uff1a"}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.code,{children:"i=i"})," \u628a\u5f53\u524d\u7684 ",(0,r.jsx)(e.code,{children:"i"})," \u503c\u4f5c\u4e3a\u9ed8\u8ba4\u53c2\u6570\u7ed1\u5b9a\u5230\u51fd\u6570\u4e2d"]}),"\n",(0,r.jsxs)(e.li,{children:["\u6bcf\u4e2a\u95ed\u5305\u90fd\u62e5\u6709\u81ea\u5df1\u7684 ",(0,r.jsx)(e.code,{children:"i"})," \u503c\u526f\u672c"]}),"\n"]}),"\n",(0,r.jsx)(e.p,{children:"\u65b9\u6cd5\u4e8c\uff1a\u4f7f\u7528\u51fd\u6570\u5de5\u5382"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-python",children:"def make_func(i):\n    return lambda x: x * i\n\nfuncs = [make_func(i) for i in range(3)]\nprint([f(2) for f in funcs])  # \u2705 \u8f93\u51fa\uff1a[0, 2, 4]\n"})}),"\n",(0,r.jsx)(e.p,{children:"\u89e3\u91ca\uff1a"}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:["\u6bcf\u6b21\u8c03\u7528 ",(0,r.jsx)(e.code,{children:"make_func(i)"})," \u90fd\u521b\u5efa\u4e00\u4e2a\u65b0\u7684\u4f5c\u7528\u57df"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.code,{children:"i"})," \u88ab\u56fa\u5b9a\u5728\u8be5\u4f5c\u7528\u57df\u4e2d\uff0c\u4e0d\u53d7\u540e\u7eed\u5f71\u54cd"]}),"\n"]}),"\n",(0,r.jsxs)(e.h3,{id:"\u533f\u540d\u51fd\u6570\u4e0e-functoolspartial",children:["\u533f\u540d\u51fd\u6570\u4e0e ",(0,r.jsx)(e.code,{children:"functools.partial"})]}),"\n",(0,r.jsx)(e.p,{children:"partial\u7684\u4f5c\u7528\u662f\u56fa\u5b9a\u51fd\u6570\u7684\u67d0\u4e2a\u53c2\u6570"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-python",children:"from functools import partial\n\ndef power(base: int, exp: int) -> int:\n    return base ** exp\n\nsquare = partial(power, exp=2) # \u7b2c\u4e00\u4e2a\u53c2\u6570\u8868\u793a\u9700\u8981\u56fa\u5b9a\u7684\u51fd\u6570\uff0c\u7b2c\u4e8c\u4e2a\u53c2\u6570\u8981\u7528\u5173\u952e\u8bcd\u53c2\u6570\uff0c\u8868\u8ff0\u9700\u8981\u56fa\u5b9a\u7684\u90a3\u4e2a\u53c2\u6570\uff0c\u56fa\u5b9a\u503c\u4e3axx\nprint(square(5))  # 25\n"})}),"\n",(0,r.jsx)(e.h3,{id:"\u5e38\u89c1\u5751\u4e0e\u6700\u4f73\u5b9e\u8df5\u95ed\u5305\u4e0e\u533f\u540d\u51fd\u6570",children:"\u5e38\u89c1\u5751\u4e0e\u6700\u4f73\u5b9e\u8df5\uff08\u95ed\u5305\u4e0e\u533f\u540d\u51fd\u6570\uff09"}),"\n",(0,r.jsx)(e.h3,{id:"\u7ec3\u4e60\u4e0e\u601d\u8003\u95ed\u5305\u4e0e\u533f\u540d\u51fd\u6570",children:"\u7ec3\u4e60\u4e0e\u601d\u8003\uff08\u95ed\u5305\u4e0e\u533f\u540d\u51fd\u6570\uff09"}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsx)(e.p,{children:"\u4f7f\u7528\u95ed\u5305\u5b9e\u73b0\u9012\u589e\u8ba1\u6570\u5668\uff0c\u5e76\u652f\u6301\u91cd\u7f6e\u3002"}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsxs)(e.p,{children:["\u4f7f\u7528 ",(0,r.jsx)(e.code,{children:"lambda"})," \u4e0e ",(0,r.jsx)(e.code,{children:"sorted"}),"\uff0c\u6309\u5b57\u7b26\u4e32\u957f\u5ea6\u6392\u5e8f\uff1b\u518d\u7528\u547d\u540d\u51fd\u6570\u91cd\u5199\u5bf9\u6bd4\u3002"]}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsxs)(e.p,{children:["\u4f7f\u7528 ",(0,r.jsx)(e.code,{children:"functools.partial"})," \u9884\u914d\u7f6e HTTP \u5ba2\u6237\u7aef\u7684\u516c\u5171\u53c2\u6570\uff08\u5982\u8d85\u65f6\uff09\u3002"]}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsxs)(e.p,{children:["\u907f\u514d\u5728\u590d\u6742\u903b\u8f91\u4e2d\u6ee5\u7528 ",(0,r.jsx)(e.code,{children:"lambda"}),"\uff1b\u547d\u540d\u51fd\u6570\u66f4\u53ef\u8bfb\u3001\u53ef\u6d4b\u8bd5\u3002"]}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsxs)(e.p,{children:["\u4f7f\u7528 ",(0,r.jsx)(e.code,{children:"nonlocal"})," \u7ba1\u7406\u53ef\u53d8\u95ed\u5305\u72b6\u6001\uff0c\u614e\u7528\u5168\u5c40\u53d8\u91cf\u3002"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(e.h2,{id:"\u63cf\u8ff0\u7b26descriptor",children:"\u63cf\u8ff0\u7b26\uff08Descriptor\uff09"}),"\n",(0,r.jsx)(e.h3,{id:"\u6982\u5ff5\u63cf\u8ff0\u7b26",children:"\u6982\u5ff5\uff08\u63cf\u8ff0\u7b26\uff09"}),"\n",(0,r.jsxs)(e.p,{children:["\u63cf\u8ff0\u7b26\u662f\u5b9e\u73b0 ",(0,r.jsx)(e.code,{children:"__get__"}),"/",(0,r.jsx)(e.code,{children:"__set__"}),"/",(0,r.jsx)(e.code,{children:"__delete__"})," \u7684\u5bf9\u8c61\uff0c\u7528\u4e8e\u62e6\u622a\u5e76\u63a7\u5236\u5c5e\u6027\u8bbf\u95ee\uff1b",(0,r.jsx)(e.code,{children:"property"})," \u662f\u5176\u8bed\u6cd5\u7cd6\u5f62\u5f0f\u3002"]}),"\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.code,{children:"__get__"}),"\u5728\u8bfb\u53d6\u5c5e\u6027\u7684\u65f6\u5019\u4f1a\u81ea\u52a8\u6267\u884c\uff0c",(0,r.jsx)(e.code,{children:"__set__"}),"\u4f1a\u5728\u7ed9\u5c5e\u6027\u8d4b\u503c\u7684\u65f6\u5019\u81ea\u52a8\u6267\u884c\uff0c ",(0,r.jsx)(e.code,{children:"__del__"}),"\u53ea\u6709\u5728\u4f7f\u7528",(0,r.jsx)(e.code,{children:"del"}),"\u5173\u952e\u8bcd\u5220\u9664\u5c5e\u6027\u65f6\u624d\u4f1a\u81ea\u52a8\u6267\u884c\u3002"]}),"\n",(0,r.jsx)(e.h3,{id:"\u5e94\u7528\u573a\u666f\u63cf\u8ff0\u7b26",children:"\u5e94\u7528\u573a\u666f\uff08\u63cf\u8ff0\u7b26\uff09"}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"\u5c5e\u6027\u6821\u9a8c\u4e0e\u8f6c\u6362\uff1a\u7c7b\u578b/\u8303\u56f4\u68c0\u67e5\u3001\u5355\u4f4d\u6362\u7b97"}),"\n",(0,r.jsx)(e.li,{children:"\u61d2\u52a0\u8f7d\u4e0e\u7f13\u5b58\uff1a\u9996\u6b21\u8ba1\u7b97\u540e\u5199\u56de\u540c\u540d\u5c5e\u6027\uff0c\u540e\u7eed\u76f4\u63a5\u8bfb\u53d6"}),"\n",(0,r.jsx)(e.li,{children:"\u4ee3\u7406\u5b58\u53d6\uff1a\u5c06\u8bbf\u95ee\u91cd\u5b9a\u5411\u5230\u5176\u4ed6\u5bf9\u8c61\u6216\u5b58\u50a8\u5c42\uff08\u5982 ORM \u5b57\u6bb5\uff09"}),"\n"]}),"\n",(0,r.jsx)(e.h3,{id:"\u5165\u95e8\u793a\u4f8b\u57fa\u7840\u63cf\u8ff0\u7b26",children:"\u5165\u95e8\u793a\u4f8b\uff1a\u57fa\u7840\u63cf\u8ff0\u7b26"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-python",children:'class Typed:\n    def __init__(self, name: str, expected_type: type):\n        self.name = name\n        self.expected_type = expected_type\n\n    def __set_name__(self, owner, name):\n        # \u652f\u6301\u81ea\u52a8\u6ce8\u5165\u5c5e\u6027\u540d\uff0c\u7b80\u5316\u521d\u59cb\u5316\n        if not hasattr(self, "name") or self.name is None:\n            self.name = name\n\n    def __get__(self, instance, owner):\n        if instance is None:\n            return self\n        return instance.__dict__.get(self.name)\n\n    def __set__(self, instance, value):\n        if not isinstance(value, self.expected_type):\n            raise TypeError(f"{self.name} must be {self.expected_type.__name__}")\n        instance.__dict__[self.name] = value\n\nclass User:\n    name = Typed("name", str)\n    age = Typed("age", int)\n\nu = User()\nu.name = "Alice"\nu.age = 20\n'})}),"\n",(0,r.jsx)(e.h3,{id:"\u975e\u6570\u636e\u63cf\u8ff0\u7b26\u4e0e\u7f13\u5b58\u5c5e\u6027",children:"\u975e\u6570\u636e\u63cf\u8ff0\u7b26\u4e0e\u7f13\u5b58\u5c5e\u6027"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-python",children:'class LazyProperty:\n    def __init__(self, func):\n        self.func = func\n        self.__doc__ = getattr(func, "__doc__")\n\n    def __get__(self, instance, owner):\n        if instance is None:\n            return self\n        value = self.func(instance)\n        setattr(instance, self.func.__name__, value)  # \u8986\u76d6\u4e3a\u666e\u901a\u5c5e\u6027\uff0c\u5b9e\u73b0\u7f13\u5b58\n        return value\n\nclass Report:\n    @LazyProperty\n    def heavy_result(self) -> list[int]:\n        # \u5047\u88c5\u662f\u6602\u8d35\u8ba1\u7b97\n        return [x * x for x in range(10_000)]\n\nr = Report()\nprint(len(r.heavy_result))\nprint(len(r.heavy_result))  # \u7b2c\u4e8c\u6b21\u8bbf\u95ee\u547d\u4e2d\u7f13\u5b58\n'})}),"\n",(0,r.jsxs)(e.h3,{id:"property-\u7684\u7b49\u4ef7\u63cf\u8ff0\u7b26\u5199\u6cd5",children:[(0,r.jsx)(e.code,{children:"property"})," \u7684\u7b49\u4ef7\u63cf\u8ff0\u7b26\u5199\u6cd5"]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-python",children:'class Rectangle:\n    def __init__(self, width: float, height: float):\n        self._width = width\n        self._height = height\n\n    @property\n    def area(self) -> float:\n        """\u53ea\u8bfb\u5c5e\u6027\u3002"""\n        return self._width * self._height\n'})}),"\n",(0,r.jsx)(e.h3,{id:"\u5e38\u89c1\u5751\u4e0e\u6700\u4f73\u5b9e\u8df5\u63cf\u8ff0\u7b26",children:"\u5e38\u89c1\u5751\u4e0e\u6700\u4f73\u5b9e\u8df5\uff08\u63cf\u8ff0\u7b26\uff09"}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"\u6570\u636e\u63cf\u8ff0\u7b26\u4f18\u5148\u7ea7\u9ad8\u4e8e\u5b9e\u4f8b\u5b57\u5178\uff1b\u975e\u6570\u636e\u63cf\u8ff0\u7b26\u76f8\u53cd\uff0c\u6ce8\u610f\u8986\u76d6\u884c\u4e3a\u3002"}),"\n",(0,r.jsxs)(e.li,{children:["\u4f7f\u7528 ",(0,r.jsx)(e.code,{children:"__set_name__"})," \u81ea\u52a8\u6ce8\u5165\u5c5e\u6027\u540d\uff0c\u51cf\u5c11\u91cd\u590d\u4ee3\u7801\u3002"]}),"\n",(0,r.jsx)(e.li,{children:"\u5bf9\u6027\u80fd\u654f\u611f\u7684\u53ea\u8bfb\u5c5e\u6027\u53ef\u4f7f\u7528\u201c\u61d2\u52a0\u8f7d + \u7f13\u5b58\u201d\u7b56\u7565\u3002"}),"\n"]}),"\n",(0,r.jsx)(e.h3,{id:"\u7ec3\u4e60\u4e0e\u601d\u8003\u63cf\u8ff0\u7b26",children:"\u7ec3\u4e60\u4e0e\u601d\u8003\uff08\u63cf\u8ff0\u7b26\uff09"}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:["\u5b9e\u73b0 ",(0,r.jsx)(e.code,{children:"Positive"})," \u63cf\u8ff0\u7b26\uff0c\u5f3a\u5236\u6570\u503c\u5c5e\u6027\u4e3a\u6b63\u3002"]}),"\n",(0,r.jsxs)(e.li,{children:["\u4e3a\u914d\u7f6e\u7c7b\u5b9e\u73b0\u81ea\u52a8\u5c06\u5b57\u7b26\u4e32\u8f6c\u6362\u4e3a ",(0,r.jsx)(e.code,{children:"int/float/bool"})," \u7684\u63cf\u8ff0\u7b26\u3002"]}),"\n",(0,r.jsxs)(e.li,{children:["\u5c06 ",(0,r.jsx)(e.code,{children:"@property"})," \u6539\u5199\u4e3a\u7b49\u4ef7\u63cf\u8ff0\u7b26\u7c7b\uff0c\u7406\u89e3\u4e24\u8005\u5173\u7cfb\u3002"]}),"\n"]}),"\n",(0,r.jsx)(e.h2,{id:"\u7efc\u8ff0\u4e0e\u9009\u578b\u5efa\u8bae",children:"\u7efc\u8ff0\u4e0e\u9009\u578b\u5efa\u8bae"}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"\u6a2a\u5207\u903b\u8f91\uff1a\u4f18\u5148\u88c5\u9970\u5668\uff1b\u590d\u6742\u65f6\u8003\u8651\u7c7b\u88c5\u9970\u5668\u6216\u4e2d\u95f4\u4ef6\u3002"}),"\n",(0,r.jsxs)(e.li,{children:["\u5927\u6570\u636e\u6d41\u4e0e\u7ba1\u9053\uff1a\u4f18\u5148\u751f\u6210\u5668\u4e0e ",(0,r.jsx)(e.code,{children:"itertools"}),"\uff0c\u907f\u514d\u4e00\u6b21\u6027\u8f7d\u5165\u3002"]}),"\n",(0,r.jsxs)(e.li,{children:["\u8d44\u6e90\u7ba1\u7406\uff1a\u7edf\u4e00\u5c01\u88c5\u4e0a\u4e0b\u6587\u7ba1\u7406\u5668\uff0c\u5e76\u7ed3\u5408 ",(0,r.jsx)(e.code,{children:"ExitStack"})," \u7ba1\u7406\u591a\u8d44\u6e90\u3002"]}),"\n",(0,r.jsx)(e.li,{children:"\u7c7b\u521b\u5efa\u671f\u7ea6\u675f\uff1a\u5fc5\u8981\u65f6\u4f7f\u7528\u5143\u7c7b\uff0c\u907f\u514d\u8fc7\u5ea6\u8bbe\u8ba1\u3002"}),"\n",(0,r.jsxs)(e.li,{children:["\u95ed\u5305\u7ba1\u7406\u72b6\u6001\uff1a\u914d\u5408 ",(0,r.jsx)(e.code,{children:"nonlocal"}),"\uff0c\u6216\u6539\u7528\u7c7b\u5c01\u88c5\u663e\u5f0f\u72b6\u6001\u3002"]}),"\n",(0,r.jsxs)(e.li,{children:["\u5c5e\u6027\u63a7\u5236\u4e0e\u7f13\u5b58\uff1a\u4f7f\u7528\u63cf\u8ff0\u7b26\u6216 ",(0,r.jsx)(e.code,{children:"property"}),"\uff0c\u4fdd\u6301\u7b80\u5355\u53ef\u6d4b\u3002"]}),"\n"]}),"\n",(0,r.jsx)(e.p,{children:"\u4ee5\u4e0a\u6a21\u5f0f\u914d\u5408\u5355\u4e00\u804c\u8d23\u3001KISS\u3001DRY \u539f\u5219\uff0c\u53ef\u4ee5\u663e\u8457\u63d0\u5347\u4ee3\u7801\u7684\u53ef\u7ef4\u62a4\u6027\u4e0e\u53ef\u6d4b\u8bd5\u6027\u3002"})]})}function h(n={}){const{wrapper:e}={...(0,i.R)(),...n.components};return e?(0,r.jsx)(e,{...n,children:(0,r.jsx)(o,{...n})}):o(n)}},8453:(n,e,l)=>{l.d(e,{R:()=>c,x:()=>d});var s=l(6540);const r={},i=s.createContext(r);function c(n){const e=s.useContext(i);return s.useMemo(function(){return"function"==typeof n?n(e):{...e,...n}},[e,n])}function d(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(r):n.components||r:c(n.components),s.createElement(i.Provider,{value:e},n.children)}}}]);